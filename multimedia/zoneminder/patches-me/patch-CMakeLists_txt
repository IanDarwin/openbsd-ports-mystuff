$OpenBSD$

Index: CMakeLists.txt
--- CMakeLists.txt.orig
+++ CMakeLists.txt
@@ -204,7 +204,7 @@ set(ZM_PERL_SEARCH_PATH "" CACHE PATH 
 	"Use to add a folder to your Perl's search path. This will need to be set in cases 
 	where ZM_PERL_MM_PARMS has been modified such that ZoneMinder's Perl modules are 
 	installed outside Perl's default search path.")
-set(ZM_TARGET_DISTRO "" CACHE STRING 
+set(ZM_TARGET_DISTRO "OpenBSD" CACHE STRING 
     "Build ZoneMinder for a specific distribution.  Currently, valid names are: fc27, fc26, el7, OS13, FreeBSD")
 set(ZM_SYSTEMD "OFF" CACHE BOOL 
     "Set to ON to force building ZM with systemd support. default: OFF")
@@ -234,6 +234,29 @@ elseif(ZM_TARGET_DISTRO STREQUAL "OS13")
 	set(ZM_WEB_GROUP "www")
 	set(ZM_WEBDIR "/srv/www/htdocs/zoneminder")
 	set(ZM_CGIDIR "/srv/www/cgi-bin")
+elseif(ZM_TARGET_DISTRO STREQUAL "OpenBSD")
+	# set(ZM_RUNDIR "/var/run/zm")
+        # set(ZM_SOCKDIR "/var/run/zm")
+	# set(ZM_TMPDIR "/var/tmp/zm")
+        # set(ZM_CONTENTDIR "/usr/local/var/lib/zoneminder")
+        # set(ZM_WEB_USER "www")
+        # set(ZM_WEB_GROUP "www")
+        # set(ZM_CONFIG_DIR "/usr/local/etc/zm")
+        # set(ZM_CONFIG_SUBDIR "/usr/local/etc/zm/conf.d")
+        # set(ZM_WEBDIR "/usr/local/share/zoneminder/www")
+        # set(ZM_CGIDIR "/usr/local/libexec/zoneminder/cgi-bin")
+        # set(ZM_PERL_MM_PARMS "INSTALLDIRS=site")
+	set(ZM_RUNDIR "/var/www/run/zm")
+        set(ZM_SOCKDIR "/var/www/run/zm")
+	set(ZM_TMPDIR "/var/www/tmp/zm")
+        set(ZM_CONTENTDIR "/var/www/cgi-bin/zm/zoneminder")
+        set(ZM_WEB_USER "www")
+        set(ZM_WEB_GROUP "www")
+        set(ZM_CONFIG_DIR "/var/www/etc/zm")
+        set(ZM_CONFIG_SUBDIR "/var/www/etc/zm/conf.d")
+        set(ZM_WEBDIR "/var/www/htdocs/zm")
+        set(ZM_CGIDIR "/var/www/cgi-bin/zm")
+        set(ZM_PERL_MM_PARMS "INSTALLDIRS=site")
 elseif(ZM_TARGET_DISTRO STREQUAL "FreeBSD")
 	set(ZM_RUNDIR "/var/run/zm")
         set(ZM_SOCKDIR "/var/run/zm")
@@ -286,20 +309,8 @@ check_function_exists("syscall" HAVE_SYSCALL)
 check_function_exists("sendfile" HAVE_SENDFILE)
 check_function_exists("posix_memalign" HAVE_POSIX_MEMALIGN)
 check_type_size("siginfo_t" HAVE_SIGINFO_T)
-check_type_size("ucontext_t" HAVE_UCONTEXT_T)
+#check_type_size("ucontext_t" HAVE_UCONTEXT_T)
 
-# *** LIBRARY CHECKS ***
-
-if (UNIX)
-    include (CheckLibraryExists)
-    CHECK_LIBRARY_EXISTS(rt clock_gettime "time.h" HAVE_CLOCK_GETTIME)
-    if(NOT HAVE_CLOCK_GETTIME)
-        message(FATAL_ERROR "clock_gettime not found")
-    else(NOT HAVE_CLOCK_GETTIME)
-        list(APPEND ZM_BIN_LIBS "-lrt")
-    endif(NOT HAVE_CLOCK_GETTIME)
-endif(UNIX)
-
 # zlib
 find_package(ZLIB)
 if(ZLIB_FOUND)
@@ -875,8 +886,8 @@ configure_file(zmconfgen.pl.in "${CMAKE_CURRENT_BINARY
 configure_file(zmlinkcontent.sh.in "${CMAKE_CURRENT_BINARY_DIR}/zmlinkcontent.sh" @ONLY)
 
 # Create a target for man pages
-include(Pod2Man)
-ADD_MANPAGE_TARGET()
+# include(Pod2Man)
+# ADD_MANPAGE_TARGET()
 
 # Process subdirectories
 
