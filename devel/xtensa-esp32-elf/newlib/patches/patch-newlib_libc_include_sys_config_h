$OpenBSD$

Index: newlib/libc/include/sys/config.h
--- newlib/libc/include/sys/config.h.orig
+++ newlib/libc/include/sys/config.h
@@ -189,6 +189,20 @@
 #define __DYNAMIC_REENT__
 #endif
 
+#ifdef __XTENSA__
+#include <xtensa/config/core-isa.h>
+#define MALLOC_ALIGNMENT ((XCHAL_DATA_WIDTH) < 16 ? 16 : (XCHAL_DATA_WIDTH))
+/* esp8266-specific: shrink the default fd buffer size */
+#define __BUFSIZ__ 128
+#ifndef __DYNAMIC_REENT__
+#define __DYNAMIC_REENT__
+#endif
+#ifndef _REENT_SMALL
+#define _REENT_SMALL
+#endif
+#define HAVE_GETOPT
+#endif
+
 /* This block should be kept in sync with GCC's limits.h.  The point
    of having these definitions here is to not include limits.h, which
    would pollute the user namespace, while still using types of the
